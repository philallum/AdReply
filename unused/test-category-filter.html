<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Filter Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="ui/styles.css">
</head>
<body class="w-80 min-h-screen bg-gray-50 font-sans text-sm leading-relaxed text-gray-800 p-4">
    <h1 class="text-lg font-semibold mb-4">Category Filter Test</h1>
    
    <!-- Category Filter -->
    <div class="category-filter-container mb-4">
        <label for="templateCategoryFilter" class="block text-xs font-medium text-gray-700 mb-1">
            Filter by Category
        </label>
        <select id="templateCategoryFilter" 
                class="w-full px-3 py-2 border border-facebook-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-facebook-blue focus:border-transparent bg-white">
            <option value="">All Categories</option>
            <option value="automotive">Automotive Services</option>
            <option value="fitness">Fitness & Health</option>
            <option value="food">Food & Restaurants</option>
        </select>
    </div>
    
    <!-- Template List -->
    <div id="templatesContainer" class="bg-white rounded-lg border border-facebook-border min-h-24">
        <div class="template-item group hover:bg-gray-50 transition-all duration-200 border-b border-gray-100" data-template-id="1">
            <div class="p-3">
                <div class="template-header flex justify-between items-start mb-2">
                    <div class="flex-1 min-w-0">
                        <div class="template-label text-sm font-medium text-gray-900 truncate">
                            Car Service Offer
                        </div>
                        <div class="template-stats flex items-center space-x-3 mt-1 text-xs text-gray-500">
                            <span title="Usage count">ğŸ“Š 5 uses</span>
                            <span title="Variants">ğŸ”„ 1 variants</span>
                            <span title="Last used">â° Never</span>
                            <span title="Category" class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium">ğŸ“‚ Automotive Services</span>
                        </div>
                    </div>
                </div>
                <div class="template-content text-xs text-gray-600 mb-2 line-clamp-2 leading-relaxed">
                    Great car! If you need reliable service, we're here to help!
                </div>
            </div>
        </div>
        
        <div class="template-item group hover:bg-gray-50 transition-all duration-200 border-b border-gray-100" data-template-id="2">
            <div class="p-3">
                <div class="template-header flex justify-between items-start mb-2">
                    <div class="flex-1 min-w-0">
                        <div class="template-label text-sm font-medium text-gray-900 truncate">
                            Gym Membership Deal
                        </div>
                        <div class="template-stats flex items-center space-x-3 mt-1 text-xs text-gray-500">
                            <span title="Usage count">ğŸ“Š 3 uses</span>
                            <span title="Variants">ğŸ”„ 1 variants</span>
                            <span title="Last used">â° Never</span>
                            <span title="Category" class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium">ğŸ“‚ Fitness & Health</span>
                        </div>
                    </div>
                </div>
                <div class="template-content text-xs text-gray-600 mb-2 line-clamp-2 leading-relaxed">
                    Looking great! Join our gym for amazing fitness results!
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Simple test for category filtering
        const templateCategoryFilter = document.getElementById('templateCategoryFilter');
        const templatesContainer = document.getElementById('templatesContainer');
        
        templateCategoryFilter.addEventListener('change', (e) => {
            const selectedCategory = e.target.value;
            const templateItems = templatesContainer.querySelectorAll('.template-item');
            
            templateItems.forEach(item => {
                const categorySpan = item.querySelector('span[title="Category"]');
                const categoryText = categorySpan ? categorySpan.textContent : '';
                
                if (!selectedCategory || categoryText.includes(getCategoryDisplayName(selectedCategory))) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
            
            console.log('Category filter applied:', selectedCategory);
        });
        
        function getCategoryDisplayName(categoryId) {
            const categoryMap = {
                'automotive': 'Automotive Services',
                'fitness': 'Fitness & Health',
                'food': 'Food & Restaurants'
            };
            return categoryMap[categoryId] || categoryId;
        }
    </script>
</body>
</html>